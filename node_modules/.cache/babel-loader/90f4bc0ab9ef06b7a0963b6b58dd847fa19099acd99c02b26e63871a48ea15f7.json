{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/User/Desktop/React/react1/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/User/Desktop/React/react1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/User/Desktop/React/react1/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/User/Desktop/React/react1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/User/Desktop/React/react1/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{toast}from\"react-toastify\";import axios from\"../../utils/axios\";import\"./MainPage.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function MainPage(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),token=_useState2[0],setToken=_useState2[1];setInterval(function(){setToken(window.localStorage.getItem(\"token\")||false);},1);var _useState3=useState({email:\"\",password:\"\"}),_useState4=_slicedToArray(_useState3,2),loginData=_useState4[0],setLoginDate=_useState4[1];var changeHendler=function changeHendler(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setLoginDate(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},name,value));});};var submitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var _yield$axios$post,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return axios.post(\"/auth/login\",loginData);case 4:_yield$axios$post=_context.sent;data=_yield$axios$post.data;window.localStorage.setItem(\"token\",data.accessToken);setLoginDate({email:\"\",password:\"\"});toast.success(\"Profilingzga kirdingiz\");_context.next=13;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);case 13:case\"end\":return _context.stop();}},_callee,null,[[1,11]]);}));return function submitHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"main\",{className:\"main-body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-main\",children:token?/*#__PURE__*/_jsxs(\"div\",{className:\"users-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"users-header\",children:\"\\\"Online do'kon\\\" ga hush kelibsiz\"}),/*#__PURE__*/_jsx(\"p\",{children:\"do'kon haqida to'liq malumot va sizga quydagi bo'limlar orqali maxsulotlarni tabfsiya etadi va yana birnimala\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"main-item\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"main-hedding\",children:\"Online do'kon\"}),/*#__PURE__*/_jsx(\"p\",{className:\"main-paragrf\",children:\"Do'kon haqida malumot va pastigi tugma orqli ro'yhatdan o'tib foydalanish haqida malumot\"}),/*#__PURE__*/_jsx(\"button\",{className:\"start-register\",onClick:function onClick(){document.querySelector(\".modal-body\").style.display=\"flex\";},children:\"GET START\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"login-item\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"login-form\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"login-title\",children:\"Login\"}),/*#__PURE__*/_jsx(\"label\",{className:\"login-label\",htmlFor:\"login\",children:\"Your Login\"}),/*#__PURE__*/_jsx(\"input\",{className:\"login\",type:\"text\",value:loginData.email,onChange:changeHendler,name:\"email\",id:\"login\",required:true,placeholder:\"login...\"}),/*#__PURE__*/_jsx(\"label\",{className:\"password-label\",htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{className:\"password\",type:\"password\",value:loginData.password,onChange:changeHendler,name:\"password\",id:\"password1\",required:true,placeholder:\"password...\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"login-btn\",onClick:submitHandler,children:\"Login\"})]})})]})})});}export default MainPage;","map":{"version":3,"names":["React","useState","toast","axios","MainPage","token","setToken","setInterval","window","localStorage","getItem","email","password","loginData","setLoginDate","changeHendler","e","target","name","value","prev","submitHandler","preventDefault","post","data","setItem","accessToken","success","document","querySelector","style","display"],"sources":["C:/Users/User/Desktop/React/react1/src/pages/MainPage/MainPage.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport axios from \"../../utils/axios\";\r\nimport \"./MainPage.css\";\r\n\r\nfunction MainPage() {\r\n    const [token, setToken] = useState(false);\r\n\r\n    setInterval(() => {\r\n        setToken(window.localStorage.getItem(\"token\") || false);\r\n    }, 1);\r\n\r\n    const [loginData, setLoginDate] = useState({\r\n        email: \"\",\r\n        password: \"\",\r\n    });\r\n    const changeHendler = (e) => {\r\n        const { name, value } = e.target;\r\n        setLoginDate((prev) => ({\r\n            ...prev,\r\n            [name]: value,\r\n        }));\r\n    };\r\n    const submitHandler = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const { data } = await axios.post(\"/auth/login\", loginData);\r\n\r\n            window.localStorage.setItem(\"token\", data.accessToken);\r\n            setLoginDate({\r\n                email: \"\",\r\n                password: \"\",\r\n            });\r\n           \r\n                toast.success(\"Profilingzga kirdingiz\");\r\n            \r\n\r\n        } catch (error) {\r\n            \r\n        }\r\n    };\r\n\r\n    return (\r\n        <main className=\"main-body\">\r\n            <div className=\"bg-main\">\r\n                {token ? (\r\n                    <div className=\"users-container\">\r\n                        <h1 className=\"users-header\">\r\n                            \"Online do'kon\" ga hush kelibsiz\r\n                        </h1>\r\n                        <p>\r\n                            do'kon haqida to'liq malumot va sizga quydagi\r\n                            bo'limlar orqali maxsulotlarni tabfsiya etadi va\r\n                            yana birnimala\r\n                        </p>\r\n                    </div>\r\n                ) : (\r\n                    <>\r\n                        <div className=\"main-item\">\r\n                            <h1 className=\"main-hedding\">Online do'kon</h1>\r\n                            <p className=\"main-paragrf\">\r\n                                Do'kon haqida malumot va pastigi tugma orqli\r\n                                ro'yhatdan o'tib foydalanish haqida malumot\r\n                            </p>\r\n                            <button\r\n                                className=\"start-register\"\r\n                                onClick={() => {\r\n                                    document.querySelector(\r\n                                        \".modal-body\"\r\n                                    ).style.display = \"flex\";\r\n                                }}\r\n                            >\r\n                                GET START\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"login-item\">\r\n                            <form className=\"login-form\">\r\n                                <h2 className=\"login-title\">Login</h2>\r\n                                <label className=\"login-label\" htmlFor=\"login\">\r\n                                    Your Login\r\n                                </label>\r\n                                <input\r\n                                    className=\"login\"\r\n                                    type=\"text\"\r\n                                    value={loginData.email}\r\n                                    onChange={changeHendler}\r\n                                    name=\"email\"\r\n                                    id=\"login\"\r\n                                    required\r\n                                    placeholder=\"login...\"\r\n                                />\r\n                                <label\r\n                                    className=\"password-label\"\r\n                                    htmlFor=\"password\"\r\n                                >\r\n                                    Password\r\n                                </label>\r\n                                <input\r\n                                    className=\"password\"\r\n                                    type=\"password\"\r\n                                    value={loginData.password}\r\n                                    onChange={changeHendler}\r\n                                    name=\"password\"\r\n                                    id=\"password1\"\r\n                                    required\r\n                                    placeholder=\"password...\"\r\n                                />\r\n                                <button\r\n                                    type=\"submit\"\r\n                                    className=\"login-btn\"\r\n                                    onClick={submitHandler}\r\n                                >\r\n                                    Login\r\n                                </button>\r\n                            </form>\r\n                        </div>\r\n                    </>\r\n                )}\r\n            </div>\r\n        </main>\r\n    );\r\n}\r\n\r\nexport default MainPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}